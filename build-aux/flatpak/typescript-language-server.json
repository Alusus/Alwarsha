{
    "name" : "typescript-language-server",
    "buildsystem" : "simple",
    "build-options" : {
        "env" : {
            "npm_config_nodedir" : "/usr/lib/sdk/node18"
        }
    },
    "build-commands" : [
        "mkdir -p /app/main/ /app/bin/ /app/lib/ /app/include/ /app/share/ /app/lib/yarn/global/",
        "cp -a /usr/lib/sdk/node18/bin/* /app/bin/",
        "cp -a /usr/lib/sdk/node18/lib/* /app/lib/",
        "cp -a /usr/lib/sdk/node18/include/* /app/include/",
        "cp -a /usr/lib/sdk/node18/share/* /app/share/",
        "HOME=$PWD yarn --offline config set cache-folder $FLATPAK_BUILDER_BUILDDIR/cache",
        "HOME=$PWD yarn --offline config set prefix /app",
        "HOME=$PWD yarn --offline config set global-folder /app/lib/yarn/global",
        "HOME=$PWD yarn --offline config set yarn-offline-mirror $FLATPAK_BUILDER_BUILDDIR/flatpak-node/yarn-mirror",
        "cd ./typescript-language-server && yarn --offline --pure-lockfile",
        "cd ./typescript-language-server && yarn --offline compile",
        "HOME=$PWD yarn --offline global add file:$PWD/typescript-language-server"
    ],
    "sources" : [
        {
            "type": "archive",
            "url": "https://github.com/typescript-language-server/typescript-language-server/archive/refs/tags/v2.0.0.tar.gz",
            "sha256": "4aa7890ef7acb044f99b9ca4293e540a90fd67f7b5ef16b542f92cecbfb4ebc6",
            "dest": "typescript-language-server"
        },
        {
            "type" : "patch",
            "path" : "typescript-package.json.patch"
        },
        "typescript-language-server-deps.json"
    ]
}
